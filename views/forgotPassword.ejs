<%- include('includes/header') -%> <%- include('includes/user-header') -%>
<section>
  <main class="main">
    <nav aria-label="breadcrumb" class="breadcrumb-nav border-0 mb-0">
      <div class="container">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="/">Home</a></li>
          <li class="breadcrumb-item active" aria-current="page">
            Change Password
          </li>
        </ol>
      </div>
      <!-- End .container -->
    </nav>
    <!-- End .breadcrumb-nav -->

    <%/*-- LOGIN FORM --*/%>
    <div
      class="login-page bg-image pt-8 pb-8 pt-md-12 pb-md-12 pt-lg-17 pb-lg-17"
      style="background-image: url('assets/images/backgrounds/bg_mesh.jpg')"
    >
      <div class="container">
        <div class="form-box">
          <div class="form-tab">
            <ul class="nav nav-pills nav-fill" role="tablist">
              <li class="nav-item">
                <%/*--
                <a
                  class="nav-link active"
                  id="signin-tab-2"
                  data-toggle="tab"
                  href="/login"
                  role="tab"
                  aria-controls="signin-2"
                  aria-selected="true"
                  >Login</a
                >
                --*/%>
                <a
                  class="nav-link"
                  id="signin-tab-2"
                  data-toggle="tab"
                  href="/login"
                  role="tab"
                  aria-controls="signin-2"
                  aria-selected="true"
                  >Change Password</a
                >
              </li>
            </ul>

            <div
              class="tab-pane fade show active"
              id="signin-2"
              role="tabpanel"
              aria-labelledby="signin-tab-2"
            >
              <form id="userForm" action="/verify-forgotPassword" method="post">
                <div class="form-group">
                  <label for="registerMobileno">Mobile Number</label>
                  <input
                    type="tel"
                    class="form-control"
                    id="registerMobileno"
                    name="MobileNo"
                    required
                    onblur="validateMobileno()"
                  />
                  <label
                    id="mobile-error"
                    class="errorLabel text-danger"
                    for="registerMobileno"
                  ></label>
                </div>
                <!-- End .form-group -->

                <div class="form-footer">
                  <% if (otpErr){%>
                  <label class="text-center" style="color: rgb(180, 17, 17)"
                    >Mobile Number Not Found!</label
                  >
                  <%}%>

                  <button type="submit" class="btn btn-outline-primary-2">
                    <span>Send OTP</span>
                    <%/*-- <i class="icon-long-arrow-right"></i> --*/%>
                  </button>

                  <%/*--
                  <div class="custom-control custom-checkbox">
                    <input
                      type="checkbox"
                      class="custom-control-input"
                      id="register-policy-2"
                      required
                    />
                    <label
                      class="custom-control-label"
                      for="register-policy-2"
                      style="font-size: smaller"
                      >I agree to the <a href="#">privacy policy</a> *</label
                    >
                  </div>
                  <!-- End .custom-checkbox -->
                  --*/%>
                </div>
                <!-- End .form-footer -->
                <% if (loginErr) { %>
                <p class="text-center" style="color: rgb(180, 17, 17)">
                  Please Enter Valid Details
                </p>
                <% } %>

                <p class="text-center">
                  Enter your registered Mobile Number to change password.
                </p>
              </form>
            </div>
            <!-- .End .tab-pane -->
          </div>
          <!-- End .form-tab -->
        </div>
        <!-- End .form-box -->
      </div>
      <!-- End .container -->
    </div>
    <!-- End .login-page section-bg -->
  </main>
  <!-- End .main -->
</section>
<script>
  const mobileError = document.getElementById("mobile-error");
  function validateMobileno() {
    const mobileValue = document.getElementById("registerMobileno").value;

    if (mobileValue == "") {
      mobileError.innerHTML = "This field is required";
      return false;
    } else if (!mobileValue.match(/^(\+91)?[6-9]\d{9}$/)) {
      mobileError.innerText = "Enter a valid mobile number";
      return false;
    }

    // The mobile number is valid
    mobileError.innerText = "";
    return true;
  }
  function validateForm() {
    if (!validateMobileno()) {
      submitError.innerHTML = "Please fix all errors to submit.";
      setTimeout(function () {
        submitError.style.display = "none";
      }, 3000);
      return false;
    } else {
      document.getElementById("userForm").submit();
    }
  }
</script>
<%- include('includes/footerpartial') -%>
